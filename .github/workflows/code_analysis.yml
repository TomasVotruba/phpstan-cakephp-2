name: Code Analysis

on:
    push: null
    pull_request: null

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
          - uses: actions/checkout@v3

          - name: Setup PHP
            uses: shivammathur/setup-php@v2
            with:
              php-version: 8.0

          - name: Validate composer
            run: composer validate

          - name: Install dependencies
            run: composer install

          - name: Run static type analysis
            run: vendor/bin/phpstan

          - name: Run test suite
            run: vendor/bin/phpunit
